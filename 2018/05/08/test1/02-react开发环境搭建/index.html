<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>react入门2 | Hexo</title>
    
    
        <meta name="keywords" content="react入门2" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="开发环境react开发环境搭建基本使用 在页面中使用引入  123456&amp;lt;!--react的核心库--&amp;gt;&amp;lt;script src=&amp;quot;https://unpkg.com/react@16/umd/react.development.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&amp;lt;!--react的与dom相关的一些功能--&amp;gt;&amp;lt;script src=">
<meta property="og:type" content="article">
<meta property="og:title" content="react入门2">
<meta property="og:url" content="http://yoursite.com/2018/05/08/test1/02-react开发环境搭建/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="开发环境react开发环境搭建基本使用 在页面中使用引入  123456&amp;lt;!--react的核心库--&amp;gt;&amp;lt;script src=&amp;quot;https://unpkg.com/react@16/umd/react.development.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&amp;lt;!--react的与dom相关的一些功能--&amp;gt;&amp;lt;script src=">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-05-04T11:10:50.281Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="react入门2">
<meta name="twitter:description" content="开发环境react开发环境搭建基本使用 在页面中使用引入  123456&amp;lt;!--react的核心库--&amp;gt;&amp;lt;script src=&amp;quot;https://unpkg.com/react@16/umd/react.development.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&amp;lt;!--react的与dom相关的一些功能--&amp;gt;&amp;lt;script src=">
    

    
        <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml" />
    

    
        <link rel="icon" href="/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">
    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


    
        <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Hexo</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">首页</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Buscar" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Entradas',
            PAGES: 'Pages',
            CATEGORIES: 'Categorias',
            TAGS: 'Etiquetas',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">首页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Buscar" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap" id='categories'>
        <h3 class="widget-title">
            <span>Categorias</span>
            &nbsp;
            <a id='allExpand' href="#">
                <i class="fa fa-angle-double-down fa-2x"></i>
            </a>
        </h3>
        
        
        
         <ul class="unstyled" id="tree" > 
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            test1
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2018/05/08/test1/01-react入门/">react入门</a></li>  <li class="file active"><a href="/2018/05/08/test1/02-react开发环境搭建/">react入门2</a></li>  <li class="file"><a href="/2018/05/08/test1/hello-world/">Hello World</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/2018/05/08/hello-world/">Hello World</a></li>  </ul> 
    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            // Handle directory-tree expansion:
            // 左键单独展开目录
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // 右键展开下属所有目录
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // 展开关闭所有目录按钮
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });  
        });
    </script>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-test1/02-react开发环境搭建" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/test1/">test1</a>
    </div>

                        
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/05/08/test1/02-react开发环境搭建/">
            <time datetime="2018-05-07T22:42:55.179Z" itemprop="datePublished">2018-05-08</time>
        </a>
    </div>


                        
                            <i class="fa fa-bar-chart"></i>
                            <span id="busuanzi_container_site_pv"><span id="busuanzi_value_page_pv"></span></span>    
                        
                        
                            <div class="article-meta-button">
                                <a href='https://github.com/zthxxx/Wiki-site/raw/writing/source/_posts/test1/02-react开发环境搭建.md'> Source </a>
                            </div>
                            <div class="article-meta-button">
                                <a href='https://github.com/zthxxx/Wiki-site/edit/writing/source/_posts/test1/02-react开发环境搭建.md'> Edit </a>
                            </div>
                            <div class="article-meta-button">
                                <a href='https://github.com/zthxxx/Wiki-site/commits/writing/source/_posts/test1/02-react开发环境搭建.md'> History </a>
                            </div>
                        
                    </div>
                
                
    
        <h1 class="article-title" itemprop="name">
            react入门2
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <h1 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h1><h2 id="react开发环境搭建"><a href="#react开发环境搭建" class="headerlink" title="react开发环境搭建"></a>react开发环境搭建</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><blockquote>
<p>在页面中使用引入</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--react的核心库--&gt;</span><br><span class="line">&lt;script src=&quot;https://unpkg.com/react@16/umd/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!--react的与dom相关的一些功能--&gt;</span><br><span class="line">&lt;script src=&quot;https://unpkg.com/react-dom@16/umd/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!--将浏览器不支持的jsx语法转化为js语法--&gt;</span><br><span class="line">&lt;script src=&quot;https://unpkg.com/babel-standalone@6.15.0/babel.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="基本开发环境搭建"><a href="#基本开发环境搭建" class="headerlink" title="基本开发环境搭建"></a>基本开发环境搭建</h3><blockquote>
<p>使用 create-react-app 快速构建 React 开发环境</p>
</blockquote>
<h4 id="安装项目模板"><a href="#安装项目模板" class="headerlink" title="安装项目模板"></a>安装项目模板</h4><blockquote>
<p>基于webpack快速搭建开发环境</p>
</blockquote>
<p><strong>1.全局安装开发环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g create-react-app</span><br></pre></td></tr></table></figure>
<p><strong>2.创建react项目</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create-react-app my-app</span><br></pre></td></tr></table></figure>
<p><strong>3.切换目录</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">cd my-app</span><br><span class="line"></span><br><span class="line">辅助cmd命令: </span><br><span class="line">        mkdir</span><br><span class="line">        del</span><br><span class="line">        rmdir</span><br><span class="line">        tree</span><br></pre></td></tr></table></figure>
<p><strong>4.启动应用程序</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>
<h4 id="目录结构解析"><a href="#目录结构解析" class="headerlink" title="目录结构解析"></a>目录结构解析</h4><blockquote>
<p>使用 tree /f &gt; tree.txt 命令生成项目目录结构</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">├─ .gitignore</span><br><span class="line">│  package.json</span><br><span class="line">│  README.md</span><br><span class="line">│  </span><br><span class="line">├─public</span><br><span class="line">│      favicon.ico</span><br><span class="line">│      index.html</span><br><span class="line">│      manifest.json</span><br><span class="line">│      </span><br><span class="line">└─src</span><br><span class="line">        App.css</span><br><span class="line">        App.js</span><br><span class="line">        App.test.js</span><br><span class="line">        index.css</span><br><span class="line">        index.js</span><br><span class="line">        logo.svg</span><br><span class="line">        registerServiceWorker.js</span><br></pre></td></tr></table></figure>
<h3 id="搭建-webpack-React-开发环境"><a href="#搭建-webpack-React-开发环境" class="headerlink" title="搭建 webpack + React 开发环境"></a>搭建 webpack + React 开发环境</h3><p>在这里,使用webpack搭建开发环境,官网参考  <a href="https://webpack.github.io/" target="_blank" rel="noopener">https://webpack.github.io/</a></p>
<h4 id="初始化-npm-环境并安装插件"><a href="#初始化-npm-环境并安装插件" class="headerlink" title="初始化 npm 环境并安装插件"></a>初始化 npm 环境并安装插件</h4><p>当前的 web 前端开发，基本使用 npm 管理第三方依赖（插件）</p>
<h5 id="初始化-npm-环境"><a href="#初始化-npm-环境" class="headerlink" title="初始化 npm 环境"></a>初始化 npm 环境</h5><ul>
<li><code>使用npm init 或者是 npm init -y命令初始化创建package.json文件</code></li>
</ul>
<p>首先保证有 node 和 npm 环境，运行<code>node -v</code>和<code>npm -v</code>查看</p>
<p>进入项目目录，运行<code>npm init</code>按照步骤填写最终生成<code>package.json</code>文件，所有使用 npm 做依赖管理的项目，根目录下都会有一个这个文件，该文件描述了项目的基本信息以及一些第三方依赖项（插件）。详细的使用说明可查阅<a href="https://docs.npmjs.com/" target="_blank" rel="noopener">官网文档</a>，不过是英文的。</p>
<h5 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h5><ul>
<li><p>运行<code>npm install webpack webpack-dev-server --save-dev</code>安装webpack环境</p>
</li>
<li><p>运行<code>npm i react react-dom --save</code>安装项目核心依赖</p>
</li>
</ul>
<p>已知我们将使用 webpack 作为构建工具，那么就需要安装相应插件，运行 <code>npm install webpack webpack-dev-server --save-dev</code> 来安装两个插件。</p>
<p>又已知我们将使用 React ，也需要安装相应插件，运行 <code>npm i react react-dom --save</code>来安装两个插件。其中<code>i</code>是<code>install</code>的简写形式。</p>
<p>安装完成之后，查看<code>package.json</code>可看到多了<code>devDependencies</code>和<code>dependencies</code>两项，根目录也多了一个<code>node_modules</code>文件夹。</p>
<h5 id="save-和-save-dev-的区别"><a href="#save-和-save-dev-的区别" class="headerlink" title="--save 和 --save-dev 的区别"></a><code>--save</code> 和 <code>--save-dev</code> 的区别</h5><p><code>npm i</code>时使用<code>--save</code>和<code>--save-dev</code>，可分别将依赖（插件）记录到<code>package.json</code>中的<code>dependencies</code>和<code>devDependencies</code>下面。</p>
<p><code>dependencies</code>下记录的是项目在运行时必须依赖的插件，常见的例如<code>react</code> <code>jquery</code>等，即及时项目打包好了、上线了，这些也是需要用的，否则程序无法正常执行。</p>
<p><code>devDependencies</code>下记录的是项目在开发过程中使用的插件，例如这里我们开发过程中需要使用<code>webpack</code>打包，而我在工作中使用<code>fis3</code>打包，但是一旦项目打包发布、上线了之后，<code>webpack</code>和<code>fis3</code>就都没有用了，可卸磨杀驴。</p>
<p>延伸一下，我们的项目有<code>package.json</code>，其他我们用的项目如<code>webpack</code>也有<code>package.json</code>，见<code>./node_modules/webpack/package.json</code>，其中也有<code>devDependencies</code>和<code>dependencies</code>。当我们使用<code>npm i webpack</code>时，<code>./node_modules/webpack/package.json</code>中的<code>dependencies</code>会被 npm 安装上，而<code>devDependencies</code>也没必要安装。</p>
<h4 id="配置-webpack-config-js"><a href="#配置-webpack-config-js" class="headerlink" title="配置 webpack.config.js"></a>配置 webpack.config.js</h4><p>为了提高学习效率，webpack 最最基础的用法，就不再挨个演示了（推荐一个非常好的<a href="https://segmentfault.com/a/1190000006178770" target="_blank" rel="noopener">入门文章</a>，以及<a href="https://github.com/frontendmap/frontendmap/blob/master/source-env/build/pack.md" target="_blank" rel="noopener">更多资料</a>）这里我们把项目中的<code>webpack.config.js</code>这个配置文件详细的讲解一下，过程中也会照顾 0 基础的同学。</p>
<h5 id="文件格式"><a href="#文件格式" class="headerlink" title="文件格式"></a>文件格式</h5><p>webpack.config.js 就是一个普通的 js 文件，符合 commonJS 规范。最后输出一个对象，即<code>module.exports = {...}</code></p>
<h5 id="输入-amp-输出"><a href="#输入-amp-输出" class="headerlink" title="输入 &amp; 输出"></a>输入 &amp; 输出</h5><p>这个比较基础，不过需要新建<code>./app/index.jsx</code>作为入口文件，目前项目中只有这一个入口文件。不过 webpack 支持多个入口文件，可查阅文档。</p>
<p>输出就是一个<code>bundle.js</code>，js 和 css 都在里面，不过只有在开发环境下才用，发布代码的时候，肯定不能只有这么一个文件，接下来会讲到。</p>
<h5 id="module"><a href="#module" class="headerlink" title="module"></a>module</h5><p>针对不同类型的文件，使用不同的<code>loader</code>，当然使用之前要安装，例如<code>npm i style-loader css-loader --save-dev</code>。该项目代码中，我们用到的文件格式有：js/jsx 代码、css/less 代码、图片、字体文件。</p>
<p>less 是 css 的语法糖，可以更高效低冗余的写 css，不熟悉的朋友可去<a href="http://lesscss.cn/" target="_blank" rel="noopener">官网</a>看看，非常简单。</p>
<p>在加载 css/less 时用到了<code>postcss</code>，主要使用<code>autoprefixer</code>功能，帮助自动加 css3 的浏览器前缀，非常好用。</p>
<p>编译 es6 和 jsx 语法时，用到家喻户晓的<code>babel</code>，另外还需增加一个<code>.babelrc</code>的配置文件。</p>
<h5 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h5><p>使用 html 模板（需要<code>npm i html-webpack-plugin --save-dev</code>），这样可以将输出的文件名（如<code>./bundle.js</code>）自动注入到 html 中，不用我们自己手写。手写的话，一旦修改就需要改两个地方。</p>
<p>使用热加载和自动打开浏览器插件</p>
<h5 id="devServer"><a href="#devServer" class="headerlink" title="devServer"></a>devServer</h5><p>对 webpack-dev-server 的配置</p>
<h5 id="npm-start"><a href="#npm-start" class="headerlink" title="npm start"></a>npm start</h5><p>在 package.json 中，输入以下代码，将这一串命令封装为<code>npm start</code>，这样就可以运行项目代码了。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "start": "NODE_ENV=dev webpack-dev-server --progress --colors"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码中<code>NODE_ENV=dev</code>代表当前是开发环境下，这里的<code>&quot;dev&quot;</code>可被 js 代码中的<code>process.env.NODE_ENV</code>得到并做一些其他处理。</p>
<h5 id="定义环境全局变量"><a href="#定义环境全局变量" class="headerlink" title="定义环境全局变量"></a>定义环境全局变量</h5><p>以下定义，可使得代码通过<code>__DEV__</code>得到当前是不是开发模式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">  __DEV__: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse((process.env.NODE_ENV == <span class="string">'dev'</span>) || <span class="string">'false'</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>打开<code>./app/util/localStore.js</code>可以看到<code>if (__DEV__) { console.error(&#39;localStorage.getItem报错, &#39;, ex.message) }</code>，即只有开发环境下才提示error，发布之后就不会提示了。（因为发布的命令中用到<code>NODE_ENV=production</code>）</p>
<h4 id="配置-webpack-production-config-js"><a href="#配置-webpack-production-config-js" class="headerlink" title="配置 webpack.production.config.js"></a>配置 webpack.production.config.js</h4><p>开发环境下，可以不用考虑系统的性能，更多考虑的是如何增加开发效率。而发布系统时，就需要考虑发布之后的系统的性能，包括加载速度、缓存等。下面介绍发布用配置代码和开发用的不一样的地方。</p>
<h5 id="发布到-build-文件夹中"><a href="#发布到-build-文件夹中" class="headerlink" title="发布到 ./build 文件夹中"></a>发布到 <code>./build</code> 文件夹中</h5><p><code>path: __dirname + &quot;/build&quot;,</code></p>
<h5 id="vendor"><a href="#vendor" class="headerlink" title="vendor"></a>vendor</h5><p>将第三方依赖单独打包。即将 node_modules 文件夹中的代码打包为 vendor.js 将我们自己写的业务代码打包为 app.js。这样有助于缓存，因为在项目维护过程中，第三方依赖不经常变化，而业务代码会经常变化。</p>
<h5 id="md5后缀"><a href="#md5后缀" class="headerlink" title="md5后缀"></a>md5后缀</h5><p>为每个打包出来的文件都加md5后缀，例如<code>&quot;/js/[name].[chunkhash:8].js&quot;</code>，可使文件强缓存。</p>
<h5 id="分目录"><a href="#分目录" class="headerlink" title="分目录"></a>分目录</h5><p>打包出来的不同类型的文件，放在不同目录下，例如图片文件将放在<code>img/</code>目录下</p>
<h5 id="Copyright"><a href="#Copyright" class="headerlink" title="Copyright"></a>Copyright</h5><p>自动为打包出来的代码增加 copyright 内容</p>
<h5 id="分模块"><a href="#分模块" class="headerlink" title="分模块"></a>分模块</h5><p><code>new webpack.optimize.OccurenceOrderPlugin(),</code></p>
<h5 id="压缩代码"><a href="#压缩代码" class="headerlink" title="压缩代码"></a>压缩代码</h5><p>使用 Uglify 压缩代码，其中<code>warnings: false</code>是去掉代码中的 warning</p>
<h5 id="分离-css-和-js-文件"><a href="#分离-css-和-js-文件" class="headerlink" title="分离 css 和 js 文件"></a>分离 css 和 js 文件</h5><p>开发环境下，css 代码是放在整个打包出来的那个 bundle.js 文件中的，发布环境下当然不能混淆在一起，使用<code>new ExtractTextPlugin(&#39;/css/[name].[chunkhash:8].css&#39;),</code>将 css 代码分离出来。</p>
<h5 id="npm-run-build"><a href="#npm-run-build" class="headerlink" title="npm run build"></a>npm run build</h5><p>打开<code>package.json</code>，查看以下代码。<code>npm start</code>和<code>npm run build</code>分别是运行代码和打包项目。另外，<code>&quot;start&quot;、&quot;test&quot;</code>可以不用<code>run</code>。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "start": "NODE_ENV=dev webpack-dev-server --progress --colors",</span><br><span class="line">  "build": "rm -rf ./build &amp;&amp; NODE_ENV=production webpack --config ./webpack.production.config.js --progress --colors"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>这两个命令主要有以下区别：</p>
<ul>
<li>前者中默认使用 webpack.config.js 作为配置文件，而后者中强制使用 webpack.production.config.js 作为配置文件</li>
<li>前者<code>NODE_ENV=dev</code>而后者<code>NODE_ENV=production</code>，标识不同的环境。而这个<code>&quot;dev&quot; &quot;production&quot;</code>可以在代码中通过<code>process.env.NODE_ENV</code>获取。</li>
</ul>
<h5 id="最小化压缩-React"><a href="#最小化压缩-React" class="headerlink" title="最小化压缩 React"></a>最小化压缩 React</h5><p>以下配置可以告诉 React 当前是生产环境，请最小化压缩 js ，即把开发环境中的一些提示、警告、判断通通去掉，直流以下发布之后可用的代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">  <span class="string">'process.env'</span>:&#123;</span><br><span class="line">    <span class="string">'NODE_ENV'</span>: <span class="built_in">JSON</span>.stringify(process.env.NODE_ENV)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>


    
<nav id="article-nav">
    
        <a href="/2018/05/08/test1/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Más nuevo</strong>
            <div class="article-nav-title">
                
                    Hello World
                
            </div>
        </a>
    
    
        <a href="/2018/05/08/test1/01-react入门/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Más viejo</strong>
            <div class="article-nav-title">react入门</div>
        </a>
    
</nav>





    
    




<!-- baidu url auto push script -->
<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>     
</section>
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            John Doe &copy; 2018 
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png" /></a>
            <br> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme - <a href="https://github.com/zthxxx/hexo-theme-Wikitten">wikitten</a>
            
                <br>
                <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i> <span id="busuanzi_value_site_pv"></span></span>
                &nbsp;|&nbsp;
                <span id="busuanzi_container_site_pv"><i class="fa fa-user"></i> <span id="busuanzi_value_site_uv"></span></span>
            
        </div>
    </div>
</footer>

        

    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>